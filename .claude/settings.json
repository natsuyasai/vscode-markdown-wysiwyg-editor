{
    "env": {
        "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
    },
    "hooks": {
        "PreToolUse": [
            {
                "matcher": "Edit|Write",
                "hooks": [
                    {
                        "type": "command",
                        "command": "INPUT=$(cat); case \"$INPUT\" in *package-lock.json*|*node_modules/*|*/.env*) echo 'BLOCK: このファイルは保護されています。直接編集しないでください。' >&2; exit 2 ;; */dist/*|*/build/*|*/out/*|*/storybook-static/*) echo 'BLOCK: ビルド成果物を直接編集しないでください。ソースファイルを修正してください。' >&2; exit 2 ;; *) exit 0 ;; esac"
                    }
                ]
            },
            {
                "matcher": "Bash",
                "hooks": [
                    {
                        "type": "command",
                        "command": "INPUT=$(cat); case \"$INPUT\" in *'rm -rf'*|*'git push --force'*|*'git push -f'*|*'git reset --hard'*|*'git clean -f'*|*'npm publish'*|*'vsce publish'*) echo 'BLOCK: 破壊的コマンドはユーザーの明示的な確認が必要です。' >&2; exit 2 ;; *) exit 0 ;; esac"
                    }
                ]
            }
        ],
        "PostToolUse": [
            {
                "matcher": "Edit|Write",
                "hooks": [
                    {
                        "type": "command",
                        "command": "FILEPATH=$(cat | python3 -c \"import sys,json; d=json.load(sys.stdin); print(d.get('tool_input',{}).get('file_path',''))\" 2>/dev/null); if [ -z \"$FILEPATH\" ]; then exit 0; fi; case \"$FILEPATH\" in *.ts|*.tsx|*.scss|*.css|*.json) npx prettier --write \"$FILEPATH\" 2>/dev/null ;; esac; exit 0"
                    }
                ]
            },
            {
                "matcher": "Write|Edit|MultiEdit",
                "hooks": [
                    {
                        "type": "command",
                        "command": "npm run format"
                    }
                ]
            }
        ],
        "Stop": [
            {
                "hooks": [
                    {
                        "type": "prompt",
                        "prompt": "Claudeの作業でファイル変更（Edit/Write）が行われた場合、以下の品質チェックを実施済みか確認してください: (1) ルートディレクトリで npm run check-types && npm run lint (2) webview-uiディレクトリで npm run check-types && npm run lint。未実施なら 'NO' と回答し品質チェックを実行させてください。ファイル変更がない場合（調査や質問回答のみ）はチェック不要なので 'YES' と回答してください。"
                    }
                ]
            }
        ],
        "Notification": [
            {
                "hooks": [
                    {
                        "type": "command",
                        "command": "which notify-send >/dev/null 2>&1 && notify-send -i dialog-information 'Claude Code' '操作が完了しました' 2>/dev/null; exit 0"
                    }
                ]
            }
        ]
    }
}